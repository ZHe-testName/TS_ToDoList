(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{153:function(e,t,a){e.exports=a(211)},158:function(e,t,a){},159:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(9),r=a.n(i);a(158),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(159);var c,l=a(136),s=a.n(l),u=a(239),d=a(248),f=a(249),m=a(250),b=a(238),p=a(216),v=a(243),k=a(251),E=a(33),h=a(126),g=a.n(h).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1",headers:{"API-KEY":"797677fc-71e8-47d3-89ee-972f9e368c32"}}),T=function(){return g.get("/todo-lists").then((function(e){return e.data}))},y=function(e){return g.post("/todo-lists",{title:e}).then((function(e){return e.data}))},C=function(e){return g.delete("/todo-lists/".concat(e)).then((function(e){return e.data.resultCode}))},j=function(e,t){return g.put("/todo-lists/".concat(e),{title:t}).then((function(e){return e.config}))},O=function(e){return g.get("/todo-lists/".concat(e,"/tasks")).then((function(e){return e.data.items}))},A=function(e,t){return g.post("/todo-lists/".concat(e,"/tasks"),{title:t}).then((function(e){return e.data}))},L=function(e,t){return g.delete("/todo-lists/".concat(e,"/tasks/").concat(t)).then((function(e){return e.data.resultCode}))},I=function(e,t,a){return g.put("/todo-lists/".concat(e,"/tasks/").concat(t),a).then((function(e){return e.config.data}))},S=function(e){return g.post("/auth/login",e).then((function(e){return e.data}))},w=function(){return g.delete("/auth/login").then((function(e){return e.data}))},D=function(){return g.get("/auth/me").then((function(e){return e.data}))},x=a(31),N=function(e,t){e.resultCode&&e.messages.length&&t(U({value:e.messages[0]})),t(V({value:"failed"}))},F=function(e,t){t(U({value:e||"Some error occurred."})),t(V({value:"failed"}))},P=Object(x.b)({name:"auth",initialState:{isAuth:!1},reducers:{setIsAuthAC:function(e,t){console.log("set isAuth"),e.isAuth=t.payload.value}}}),R=P.reducer,z=P.actions.setIsAuthAC,_=R;!function(e){e.SET_STATUS="SET_STATUS",e.SET_ERROR="SET_ERROR",e.SET_APP_INITIALIZED="SET_APP_INITIALIZED"}(c||(c={}));var M=Object(x.b)({name:"app",initialState:{status:"idle",errorMessage:null,isInitialized:!1},reducers:{setErrorAC:function(e,t){e.errorMessage=t.payload.value},setStatusAC:function(e,t){e.status=t.payload.value},setAppInitializedAC:function(e,t){e.isInitialized=t.payload.value}}}),H=M.reducer,B=M.actions,J=B.setAppInitializedAC,V=B.setStatusAC,U=B.setErrorAC,K=Object(x.b)({name:"todolists",initialState:[],reducers:{addTodoListAC:function(e,t){e.push(Object(E.a)(Object(E.a)({},t.payload.value),{},{filter:"all",entityStatus:"idle"}))},removeTodoListAC:function(e,t){return e.filter((function(e){return e.id!==t.payload.value}))},changeTodoListTitleAC:function(e,t){var a=e.find((function(e){return e.id===t.payload.todoListId}));a&&(a.title=t.payload.title)},changeTodoListFilterAC:function(e,t){var a=e.find((function(e){return e.id===t.payload.todoListId}));a&&(a.filter=t.payload.filter)},setTodoListsAC:function(e,t){return console.log("set todo list"),t.payload.lists.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{filter:"all",entityStatus:"idle"})}))},changeTodoListEntityStatusAC:function(e,t){var a=e.find((function(e){return e.id===t.payload.id}));a&&(a.entityStatus=t.payload.status)}}}),W=K.reducer,Z=K.actions,q=Z.setTodoListsAC,Y=Z.addTodoListAC,$=Z.changeTodoListEntityStatusAC,G=Z.removeTodoListAC,Q=Z.changeTodoListTitleAC,X=Z.changeTodoListFilterAC,ee=Object(x.b)({name:"tasks",initialState:{},reducers:{addTaskAC:function(e,t){var a=Object(E.a)({},t.payload.task);e[t.payload.task.todoListId].unshift(a)},removeTaskAC:function(e,t){var a=e[t.payload.toDoListId].filter((function(e){return e.id!==t.payload.taskId}));e[t.payload.toDoListId]=a},updateTaskAC:function(e,t){var a=e[t.payload.toDoListId].map((function(e){return e.id===t.payload.taskId?Object(E.a)(Object(E.a)({},e),t.payload.model):e}));e[t.payload.toDoListId]=a},setTasksAC:function(e,t){console.log("set task"),e[t.payload.toDoListId]=t.payload.tasks}},extraReducers:function(e){e.addCase(Y,(function(e,t){e[t.payload.value.id]=[]})),e.addCase(G,(function(e,t){delete e[t.payload.value]})),e.addCase(q,(function(e,t){console.log("task set todo list"),t.payload.lists.forEach((function(t){e[t.id]=[]}))}))}}),te=ee.reducer,ae=ee.actions,ne=ae.setTasksAC,oe=ae.removeTaskAC,ie=ae.addTaskAC,re=ae.updateTaskAC,ce=function(e,t,a){return function(n,o){var i=o().tasks[e].find((function(e){return e.id===t}));if(i){var r=Object(E.a)({addedDate:i.addedDate,deadline:i.deadline,priority:i.priority,startDate:i.startDate,status:i.status,title:i.title},a);n(V({value:"loading"})),I(e,t,r).then((function(a){n(re({toDoListId:e,taskId:t,model:JSON.parse(a)})),n(V({value:"successed"}))})).catch((function(e){return console.log(e)}))}else console.warn("no such task or todolist!!!")}},le=a(14),se=a(137),ue=a.n(se),de=a(256),fe=a(253),me=n.forwardRef((function(e,t){return n.createElement(fe.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))}));function be(){var e=Object(le.c)((function(e){return e.app.errorMessage})),t=Object(le.b)(),a=function(e,a){"clickaway"!==a&&t(U({value:null}))};return n.createElement("div",null,n.createElement(de.a,{open:!!e,autoHideDuration:6e3,onClose:a},n.createElement(me,{onClose:a,severity:"error"},e)))}var pe=a(13),ve=a(215),ke=a(61),Ee=a(252),he=a(132),ge=a.n(he),Te=o.a.memo((function(e){var t=e.addItem,a=e.disabled,i=void 0!==a&&a,r=Object(n.useState)(""),c=Object(ke.a)(r,2),l=c[0],s=c[1],d=Object(n.useState)(null),f=Object(ke.a)(d,2),m=f[0],b=f[1],p=function(){if(""!==l.trim())return t(l),void s("");b("Tittle is required!")};return o.a.createElement(u.a,{container:!0},o.a.createElement(Ee.a,{disabled:i,variant:"outlined",label:"Typing there",style:{marginRight:"20px"},error:!!m,value:l,helperText:m,onChange:function(e){return function(e){return s(e.currentTarget.value)}(e)},onKeyPress:function(e){return function(e){null!==m&&b(null),"Enter"===e.key&&p()}(e)}}),o.a.createElement(v.a,{disabled:i,onClick:p,variant:"contained",startIcon:o.a.createElement(ge.a,null),color:"primary",size:"small"}))})),ye=a(86),Ce=a.n(ye),je=a(257),Oe=o.a.memo((function(e){var t=e.title,a=e.newValue,i=Object(n.useState)(!1),r=Object(ke.a)(i,2),c=r[0],l=r[1],s=Object(n.useState)(""),u=Object(ke.a)(s,2),d=u[0],f=u[1];return o.a.createElement(o.a.Fragment,null,c?o.a.createElement(Ee.a,{value:d,onBlur:function(){l(!1),a(d)},onChange:function(e){f(e.currentTarget.value)},autoFocus:!0}):o.a.createElement(je.a,{onDoubleClick:function(){l(!0),f(t)}},t))})),Ae=a(242),Le=a(245),Ie=a(254),Se=o.a.memo((function(e){Object(le.c)((function(e){return e.app.status}));return o.a.createElement(Le.a,{"area-label":"todo list item",key:"".concat(e.task.id),className:e.task.status?"done-task":"uncomplete-task"},o.a.createElement(Ie.a,{indeterminate:!0,checked:!!e.task.status,onChange:function(t){return function(t){var a=t.currentTarget.checked;e.changeTaskStatus(e.task.id,+a,e.toDoListId)}(t)}}),o.a.createElement(Oe,{title:e.task.title,newValue:function(t){e.setNewTaskTitle(t,e.task.id,e.toDoListId)}}),o.a.createElement(b.a,{style:{marginLeft:"auto"},onClick:function(){return e.removeTask(e.task.id,e.toDoListId)},"area-label":"delete"},o.a.createElement(Ce.a,{fontSize:"small"})))})),we=o.a.memo((function(e){var t=e.title,a=e.tasks,i=e.filter,r=e.id,c=e.entityStatus,l=e.demo,s=void 0!==l&&l,d=e.removeTask,f=e.removeList,m=e.setFilter,b=e.changeTaskStatus,k=e.setNewTaskTitle,E=e.addNewListHeader,h=e.addTask,g=a,T=Object(le.b)();Object(n.useEffect)((function(){var e;s||T((e=r,function(t){t(V({value:"loading"})),O(e).then((function(a){return t(ne({toDoListId:e,tasks:a}))})).then((function(){return t(V({value:"successed"}))}))}))}),[]);var y=Object(n.useCallback)((function(e){h(e,r)}),[h,r]),C=Object(n.useCallback)((function(e){E(e,r)}),[E,r]),j=Object(n.useCallback)((function(){return m("all",r)}),[m,r]),A=Object(n.useCallback)((function(){return m("active",r)}),[m,r]),L=Object(n.useCallback)((function(){return m("completed",r)}),[m,r]);return"active"===i&&(g=a.filter((function(e){return!e.status}))),"completed"===i&&(g=a.filter((function(e){return!!e.status}))),o.a.createElement("div",null,o.a.createElement(u.a,{container:!0,direction:"row",justify:"space-between",style:{marginBottom:"15px"}},o.a.createElement(p.a,{variant:"h4"},o.a.createElement(Oe,{title:t,newValue:C})),o.a.createElement(v.a,{disabled:"loading"===c,color:"secondary",size:"small",startIcon:o.a.createElement(Ce.a,null),onClick:function(){f(r)}},"Delete")),o.a.createElement(Te,{addItem:y,disabled:"loading"===c}),o.a.createElement(Ae.a,{component:"nav","area-label":"todo list"},g.map((function(e){return o.a.createElement(Se,{key:e.id,toDoListId:r,task:e,removeTask:d,changeTaskStatus:b,setNewTaskTitle:k})}))),o.a.createElement(u.a,{container:!0,direction:"row",justify:"space-around"},o.a.createElement(v.a,{color:"default",variant:"all"===i?"contained":"text",onClick:j},"All"),o.a.createElement(v.a,{color:"primary",variant:"active"===i?"contained":"text",onClick:A},"Active"),o.a.createElement(v.a,{color:"secondary",variant:"completed"===i?"contained":"text",onClick:L},"Completed")))})),De=function(e){var t=e.toDoListArr,a=e.tasksObj,n=e.demo,i=e.addToDoList,r=e.addTask,c=e.removeTask,l=e.filterTasks,s=e.changeStatus,d=e.removeList,f=e.setNewTaskTitle,m=e.addNewListHeader;return Object(le.c)((function(e){return e.auth.isAuth}))?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{container:!0,item:!0,xs:12,style:{marginTop:"15px"}},o.a.createElement(Te,{addItem:i})),o.a.createElement(u.a,{container:!0,item:!0,xs:12,spacing:8,style:{marginTop:"15px"}},t.map((function(e){var t=a[e.id];return o.a.createElement(u.a,{item:!0,xs:12,md:6,lg:4,key:e.id},o.a.createElement(ve.a,{className:"list",style:{padding:"15px"},elevation:2},o.a.createElement(we,{entityStatus:e.entityStatus,demo:n,id:e.id,title:e.title,filter:e.filter,tasks:t,removeTask:c,setFilter:l,addTask:r,changeTaskStatus:s,removeList:d,setNewTaskTitle:f,addNewListHeader:m})))})))):o.a.createElement(pe.a,{to:"/login"})},xe=a(240),Ne=a(241),Fe=a(246),Pe=a(247),Re=a(139),ze=function(){var e=Object(le.b)(),t=Object(le.c)((function(e){return e.auth.isAuth})),a=Object(Re.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var a;e((a=t,function(e){e(V({value:"loading"})),S(a).then((function(t){t.resultCode||(e(z({value:!0})),e(V({value:"successed"}))),N(t,e)})).catch((function(t){F(t.message,e)}))}))}});return t?o.a.createElement(pe.a,{to:"/"}):o.a.createElement(u.a,{container:!0,justify:"center"},o.a.createElement(u.a,{item:!0,xs:4},o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(xe.a,null,o.a.createElement(Ne.a,null,"For using this app pleace login or use free account",o.a.createElement("br",null),o.a.createElement("br",null),"Email: free@samuraijs.com",o.a.createElement("br",null),o.a.createElement("br",null),"Password: free"),o.a.createElement(Fe.a,null,o.a.createElement(Ee.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),o.a.createElement(Ee.a,Object.assign({label:"Password",margin:"normal",type:"password"},a.getFieldProps("password"))),o.a.createElement(Pe.a,Object.assign({label:"Remember Me",control:o.a.createElement(Ie.a,{name:"rememberMe"})},a.getFieldProps("rememberMe"))),o.a.createElement(v.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var _e=function(e){var t=e.demo,a=void 0!==t&&t,i=Object(le.c)((function(e){return e.tasks})),r=Object(le.c)((function(e){return e.todolists})),c=Object(le.c)((function(e){return e.app.status})),l=Object(le.c)((function(e){return e.app.isInitialized})),E=Object(le.c)((function(e){return e.auth.isAuth})),h=Object(le.b)();Object(n.useEffect)((function(){!a&&E&&h((function(e){e(V({value:"loading"})),T().then((function(t){e(q({lists:t})),e(V({value:"successed"}))})).catch((function(t){F(t.message,e)}))}))}),[E]),Object(n.useEffect)((function(){h((function(e){D().then((function(t){t.resultCode||e(z({value:!0})),e(J({value:!0}))}))}))}),[]);var g=Object(n.useCallback)((function(e,t){h(function(e,t){return function(a){L(e,t).then((function(n){n||a(oe({toDoListId:e,taskId:t}))})).catch((function(e){return console.log(e)}))}}(t,e))}),[h]),O=Object(n.useCallback)((function(e,t){h(function(e,t){return function(a){a(V({value:"loading"})),A(e,t).then((function(e){e.resultCode||a(ie({task:e.data.item})),N(e,a)})).catch((function(e){F(e.message,a)}))}}(t,e))}),[h]),I=Object(n.useCallback)((function(e,t,a){h(ce(a,e,{status:t}))}),[h]),S=Object(n.useCallback)((function(e,t,a){h(ce(a,t,{title:e}))}),[h]),x=Object(n.useCallback)((function(e,t){var a=X({todoListId:t,filter:e});h(a)}),[h]),P=Object(n.useCallback)((function(e){h(function(e){return function(t){t(V({value:"loading"})),t($({id:e,status:"loading"})),C(e).then((function(a){a||(t(G({value:e})),t(V({value:"successed"})))}))}}(e))}),[h]),R=Object(n.useCallback)((function(e){h(function(e){return function(t){t(V({value:"loading"})),y(e).then((function(e){t(Y({value:e.data.item})),t(V({value:"successed"}))}))}}(e))}),[h]),_=Object(n.useCallback)((function(e,t){h(function(e,t){return function(a){j(e,t).then((function(t){a(Q({todoListId:e,title:JSON.parse(t.data).title}))}))}}(t,e))}),[h]),M=Object(n.useCallback)((function(){h((function(e){e(V({value:"loading"})),w().then((function(t){t.resultCode||(e(z({value:!1})),e(V({value:"successed"}))),N(t,e)})).catch((function(t){F(t.message,e)}))}))}),[]);return l?o.a.createElement("div",null,o.a.createElement(f.a,{position:"fixed"},o.a.createElement(m.a,null,o.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(s.a,null)),o.a.createElement(p.a,{variant:"h6"},"Todo Lists"),E&&o.a.createElement(v.a,{style:{marginLeft:"auto"},color:"inherit",onClick:M},"Log out")),"loading"===c&&o.a.createElement(ue.a,null)),o.a.createElement(k.a,{style:{marginTop:"100px"},fixed:!0},o.a.createElement(pe.b,{exact:!0,path:"/",render:function(){return o.a.createElement(De,{toDoListArr:r,tasksObj:i,demo:a,addToDoList:R,addTask:O,removeTask:g,filterTasks:x,changeStatus:I,removeList:P,setNewTaskTitle:S,addNewListHeader:_})}}),o.a.createElement(pe.b,{path:"/login",render:function(){return o.a.createElement(ze,null)}})),o.a.createElement(be,null)):o.a.createElement(u.a,{container:!0,justify:"center"},o.a.createElement(d.a,{style:{marginTop:"320px"}}))},Me=a(140),He=a(138),Be=Object(Me.a)({tasks:te,todolists:W,app:H,auth:_}),Je=Object(x.a)({reducer:Be,middleware:function(e){return e().prepend(He.a)}});window.store=Je;var Ve=a(63);r.a.render(o.a.createElement(le.a,{store:Je},o.a.createElement(Ve.a,null,o.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[153,1,2]]]);
//# sourceMappingURL=main.779379fa.chunk.js.map